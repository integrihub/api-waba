<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>WA Blast Pro</title>
  <link rel="icon" type="image/png" href="wa.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ===== LOGIN ===== -->
<div id="login">
  <h2>ğŸ” Login Admin</h2>
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- ===== APP ===== -->
<div id="app" style="display:none">

  <!-- TOP BAR -->
  <div class="topbar">
    <h1>ğŸ“Š WhatsApp Blast Dashboard integriHub</h1>
    <div class="top-actions">
      <button onclick="toggleTheme()">ğŸŒ“ Theme</button>
      <button onclick="openHistory()">ğŸ“œ History</button>
      <button onclick="logout()">ğŸšª Logout</button>
    </div>
  </div>

  <label>Template</label>
  <input id="template" placeholder="invoice_notification">

  <label>Upload Excel</label>
  <input type="file" id="file" accept=".xlsx">

  <div class="row">
    <button id="btnStart" onclick="start()">
      â–¶ Start
      <span id="spinner" class="spinner hidden"></span>
    </button>
    <button onclick="pause()">â¸ Pause</button>
    <button onclick="resume()">â–¶ Resume</button>
  </div>

  <!-- PROGRESS -->
  <div class="progress">
    <div id="bar"></div>
  </div>

  <!-- STATS -->
  <div id="stats">
    <b>Status:</b>
    Sent: <span id="sent" class="success">0</span> |
    Failed: <span id="failed" class="error">0</span> |
    Progress: <span id="percent">0%</span>
  </div>

  <!-- LOG -->
  <div class="log" id="log"></div>

</div>

<script src="auth.js"></script>
<script src="app.js"></script>

<script>
  function openHistory() {
    window.location.href = "/api-waba/history.html";
  }

  // ğŸ” auto login
  if (isLoggedIn()) {
    login.style.display = "none";
    app.style.display = "block";
  }
</script>

</body>
</html>

